<!DOCTYPE html>
<html>
  <head>
    <title>TwitterClone</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css" integrity="sha384-G0fIWCsCzJIMAVNQPfjH08cyYaUtMwjJwqiRKxxE/rx96Uroj1BtIQ6MLJuheaO9" crossorigin="anonymous">
		<meta name="viewport" content="width=device-width, initial-scale=1">
  </head>

  <body>
	<header>
		<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
			<%= link_to("TwitterClone", "/", {class: "navbar-brand"}) %>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>


			<% if session[:user_id] %>
			<!-- ログインしたときにだけ表示 -->			
			<div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
				<ul class="navbar-nav">
					<li class="nav-item">
						<%= link_to("#{@current_user.name}", "/users/#{@current_user.id}", {class: "nav-link"}) %>
					</li>
					<li class="nav-item">
						<a href="/tweets" class="nav-link">ホーム</a>
					</li>					</li>
					<li class="nav-item">
						<%= link_to("つぶやく", "/tweets/new", {class: "nav-link"}) %>
					</li>
					<li class="nav-item">
						<%= link_to("ログアウト", "/users/logout", {class: "nav-link", method: :post}) %>
					</li>
					</ul>
			</div>
			<% end %>

		</nav>
		<% if flash[:notice] %>
			<div class="alert alert-success text-center" role="alert">
				<%= flash[:notice] %>
			</div>
		<% end %>
		<% if @error_message %>
			<div class="alert alert-danger text-center" role="alert">
				<%= @error_message %>
			</div>
		<% end %>
	</header>
    <%= yield %>
  </body>
</html>
